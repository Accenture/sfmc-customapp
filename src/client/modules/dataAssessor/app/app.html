<template>
	<template lwc:if={isLoading}>
		<lightning-spinner
			alternative-text="Loading"
			size="large"></lightning-spinner>
	</template>
	<div class="slds-var-p-around_xx-small">
		<div class="slds-box slds-box_x-small slds-theme_default">
			<lightning-layout vertical-align="center">
				<lightning-layout-item flexibility="auto" padding="horizontal-small">
					<lightning-input
						variant="label-hidden"
						type="file"
						label="File"
						id="exampledata"
						name="avatar"
						accept=".csv"
						onchange={loadData}></lightning-input>

					<div>{file.name}</div>
				</lightning-layout-item>
				<lightning-layout-item flexibility="auto" padding="horizontal-small">
					<lightning-input
						variant="label-inline"
						name="defaultPhoneLocale"
						label="Default Phone Locale"
						ontextinput={setphonelocale}
						type="text"
						value={settings.defaultPhoneLocale}></lightning-input>
				</lightning-layout-item>
				<lightning-layout-item flexibility="auto" padding="horizontal-small"
					><lightning-input
						variant="label-inline"
						name="delimiter"
						label="Delimiter"
						ontextinput={setDelimiter}
						type="text"
						value={settings.delimiter}></lightning-input
				></lightning-layout-item>
				<lightning-layout-item alignment-bump="left" padding="horizontal-small">
					<lightning-button-group>
						<lightning-button
							label="(re)load"
							onclick={parsedata}
							disabled={hasNoInputData}></lightning-button>
						<lightning-button
							label="Save"
							onclick={handleSave}
							disabled={hasNotLoadedData}></lightning-button>
					</lightning-button-group>
				</lightning-layout-item>
			</lightning-layout>
		</div>
	</div>

	<template lwc:if={rows}>
		<div class="slds-var-p-around_xx-small">
			<div
				class="slds-box slds-box_xx-small slds-theme_default slds-scrollable">
				<table class="slds-table slds-table_cell-buffer slds-table_bordered">
					<thead>
						<tr class="slds-line-height_reset">
							<template for:each={headers} for:item="header">
								<th key={header.key} class="" scope="col">
									<dataAssessor-fieldoptions
										field={header}
										onchangefield={updatedfield}
										ondeletefield={deletedfield}></dataAssessor-fieldoptions>
								</th>
							</template>
						</tr>
					</thead>
					<tbody>
						<template for:each={rows} for:item="row">
							<tr key={row.key} class="slds-hint-parent">
								<template for:each={row.columns} for:item="column">
									<td key={column.key}>{column.value}</td>
								</template>
							</tr>
						</template>
					</tbody>
				</table>
			</div>
		</div>
	</template>
</template>
